# Apache MPM Prefork configuration with resource limits
# This configuration limits the number of worker processes and memory usage
# php:8.2-apache uses mpm_prefork by default

# StartServers: number of server processes to start
StartServers             5

# MinSpareServers: minimum number of server processes which are kept spare
MinSpareServers          5

# MaxSpareServers: maximum number of server processes which are kept spare
MaxSpareServers          10

# MaxRequestWorkers: maximum number of server processes allowed to start
# This is the primary limit on the number of processes
# Increased from 10 to 20 to allow sufficient processes for concurrent requests
# including DNS resolution threads needed by curl for OpenAI API calls
MaxRequestWorkers       20

# MaxConnectionsPerChild: maximum number of requests a server process serves
# Setting this to 1000 means each process will be recycled after 1000 requests
# This helps prevent memory leaks
MaxConnectionsPerChild 1000
