TODO for Cline.

- [x] End-to-end testing
    - [x] Test email flow from SMTP to IMAP
    - [x] Test thread creation 
    - [x] Test thread updates
    - [x] Test attachment handling
- [x] Setup development IMAP server
    - [x] Docker container for IMAP server
    - [x] Configuration for test environment
    - [x] Test data setup scripts
- [x] Setup of production
    - [x] Domain setup
    - [x] Cloudflare setup
    - [x] Rsync to server or server auto pulling from Github?
        - Auto pull from server.
    - [x] Prod authentication setup
    - [x] Setup scripts and cron job
    - [x] Start server
    - [x] Copy over the existing data
    - [x] Migrate data to new format (script)

Goal: make production usable

- [ ] Move from file storage to database
    - [x] Docker compose for database
        - [x] Development
        - [x] Production
    - [x] Setup for migration scripts
    - [ ] Code up new data model using database
    - [ ] Migrate data
        - [x] Make script for migrating data
            docker exec email-engine_postgres_1 psql -U offpost -d offpost -c "TRUNCATE TABLE thread_email_attachments, thread_emails, threads CASCADE;"
            docker exec email-engine_organizer_1 php /php-frontend/migrations/migrate-data.php
        - [ ] Make tool for testing the migrated data (should compare Thread from file and from DB)
            docker exec email-engine_organizer_1 php /php-frontend/migrations/verify-migration.php
        - [x] Run migration in test environment
        - [ ] Run migration in production
            - [ ] Clean up old data. Some duplicate emails present.
            - [ ] Migrate data
            - [ ] Verify data

- [ ] Views available for public
    - [ ] Public threads visible to non authenticated users
    - [ ] Front page with information

- [ ] Update-imap - folder creation should be done in class so that logic is the same in tests and update-imap.php
- [ ] GUI for replying to threads
    - [ ] Reply form with rich text editor
    - [ ] Template system for common responses
    - [ ] Attachment upload functionality
- [ ] New thread concepts
    - Reply to thread
    - Enable notiication for replies
    - Automatic follow up

TODO - medium term:
- [ ] Automatic follow up
    - [ ] Scheduled email sending system
    - [ ] Response tracking
    - [ ] Automated reminder system
    - [ ] Configurable follow-up rules
